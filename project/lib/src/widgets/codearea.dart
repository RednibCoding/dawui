// ignore_for_file: constant_identifier_names

import 'dart:html';

import '../core/widget.dart';

class CodeArea extends Widget {
  CodeAreaLanguage language;
  late final _codeElement;

  // Only needed to forward them to the build method
  final String? _code;
  final String? _width;
  final String? _height;

  String get code => _codeElement.innerText ?? "";
  set code(String value) {
    _codeElement.innerHtml = _code?.replaceAll("&", "&amp").replaceAll("<", "&lt") ?? "";
  }

  CodeArea({
    required this.language,
    String? code,
    String? width,
    String? height,
  })  : _code = code,
        _width = width,
        _height = height;

  @override
  Widget build() {
    final preElement = PreElement();
    _codeElement = document.createElement("code");
    _codeElement.className = "language-${language.toString().split('.').last}";
    if (_code != null) {
      _codeElement.innerHtml = _code?.replaceAll("&", "&amp").replaceAll("<", "&lt") ?? "";
    }
    if (_width != null) {
      preElement.style.width = _width;
      _codeElement.style.width = _width;
    }
    if (_height != null) {
      preElement.style.height = _height;
      _codeElement.style.height = _height;
    }

    preElement.append(_codeElement);

    dawuiElement = preElement;
    return this;
  }
}

// Important: enum member names must match the language names used by prism (all in lowercase)
// see: https://prismjs.com/download.html#themes=prism&languages=markup+css+clike+javascript
enum CodeAreaLanguage {
  dart,
  csharp,
  markup,
  html,
  mathml,
  svg,
  xml,
  ssml,
  atom,
  rss,
  clike,
  javascript,
  java,
  js,
  abap,
  ada,
  al,
  antlr4,
  g4,
  apacheconf,
  sql,
  apl,
  aql,
  c,
  arduino,
  ino,
  arff,
  armasm,
  aspnet,
  asm6502,
  asmatmel,
  autohotkey,
  autoit,
  avdl,
  awk,
  gawk,
  basic,
  bbcode,
  shortcode,
  bicep,
  birb,
  bison,
  bnf,
  rbnf,
  brainfuck,
  bro,
  bsl,
  oscript,
  cfscript,
  cfc,
  chaiscript,
  cil,
  clojure,
  cmake,
  cobol,
  concurnas,
  conc,
  csv,
  cypher,
  d,
  dax,
  dhall,
  ebnf,
  eiffel,
  elixir,
  elm,
  lua,
  erlang,
  xlsx,
  xls,
  fsharp,
  fortran,
  gml,
  gap,
  gcode,
  gdscript,
  gedcom,
  gettext,
  po,
  git,
  glsl,
  gn,
  gni,
  ld,
  go,
  graphql,
  haskell,
  hs,
  haxe,
  hcl,
  hlsl,
  hoon,
  hpkp,
  hsts,
  ichigojam,
  icon,
  idris,
  idr,
  inform7,
  ini,
  io,
  j,
  jexl,
  jolie,
  json,
  jsonp,
  julia,
  keepalived,
  keyman,
  kusto,
  less,
  liquid,
  livescript,
  log,
  lolcode,
  magma,
  makefile,
  matlab,
  mel,
  mermaid,
  metafont,
  mizar,
  monkey,
  moonscript,
  moon,
  n1ql,
  n4js,
  n4jsd,
  nasm,
  neon,
  nevod,
  nim,
  nix,
  nsis,
  objectivec,
  objc,
  ocaml,
  openqasm,
  qasm,
  oz,
  parigp,
  pascal,
  psl,
  pcaxis,
  px,
  peoplecode,
  pcode,
  plsql,
  powerquery,
  pq,
  mscript,
  processing,
  prolog,
  properties,
  purebasic,
  pbfasm,
  purescript,
  purs,
  python,
  py,
  qs,
  q,
  qore,
  r,
  racket,
  rkt,
  reason,
  rego,
  renpy,
  rpy,
  rescript,
  res,
  rest,
  rip,
  roboconf,
  scss,
  scala,
  smali,
  smalltalk,
  solidity,
  sol,
  turtle,
  trig,
  sparql,
  rq,
  sqf,
  squirrel,
  stata,
  iecst,
  sclang,
  swift,
  t4,
  vbnet,
  tap,
  tcl,
  twig,
  uc,
  uscript,
  uorazor,
  uri,
  url,
  vala,
  verilog,
  vhdl,
  vim,
  vb,
  vba,
  warpscript,
  wasm,
  wgsl,
  wiki,
  wolfram,
  wl,
  nb,
  ren,
  xojo,
  yang,
}
